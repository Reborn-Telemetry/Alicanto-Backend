<<<<<<< HEAD
{% extends "main.html" %} {% load humanize %} {% load static %} {% block page %}
<h1 style="color: #0f8bfd; font-weight: 700; font-size: 30px">Reporte de Energia</h1>
{% endblock page %} {% block content %}
=======
{% extends "main.html" %}{% load humanize %}{% load static %}{% block page %}
<h1 style="color: #0f8bfd; font-weight: 700; font-size: 30px">Reporte de Energia</h1>
{% endblock page %}{% block content %}
>>>>>>> 2a89e5d7a058ff36b143b661ec00d3f6807d3efa
<link rel="stylesheet" href="{% static 'styles/energy.css' %}" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/easy-pie-chart/2.1.6/jquery.easypiechart.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>

<div class="container-fluid">
    <div class="row">
        <div class="col-2">
            <div class="card custom-card">
                <div class="row g-0">
                    <div class="col-md-3">
                        <div class="icon-card"><i class="bx bxs-bolt icon-alert"></i></div>
                    </div>
                    <div class="col-md-9">
                        <div class="card-body">
                            <h5 class="card-title">Kwh Anual</h5>
<<<<<<< HEAD
                            <p class="card-text">{{energia_anual}} Kwh</p>
=======
                            <p class="card-text">{{energia_anual}}Kwh</p>
>>>>>>> 2a89e5d7a058ff36b143b661ec00d3f6807d3efa
                        </div>
                    </div>
                </div>
            </div>
            <div style="margin-top: 30px" class="card custom-card">
                <div class="row g-0">
                    <div class="col-md-3">
                        <div class="icon-card"><i class="bx bxs-ev-station icon-alert"></i></div>
                    </div>
                    <div class="col-md-9">
                        <div class="card-body">
                            <h5 class="card-title">Buses Cargando</h5>
                            <p class="card-text">{{charging}} Buses</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<<<<<<< HEAD

    <h1 style="color: #0f8bfd; font-weight: 700; font-size: 30px">Chat de Inteligencia Artificial</h1>
    <div class="container-fluid">
        <div class="row">
            <!-- Cuadro de chat de IA -->
            <div class="col-md-6 offset-md-3">
                <div class="card">
                    <div class="card-header">
                        <h5>Chat con la IA</h5>
                    </div>
                    <div class="card-body">
                        <div
                            id="chat-box"
                            style="height: 300px; overflow-y: auto; border: 1px solid #ddd; padding: 10px"
                        >
                            <!-- Las respuestas de IA aparecerán aquí -->
                        </div>
                        <div class="mt-3">
                            <input
                                type="text"
                                id="question"
                                class="form-control"
                                placeholder="Escribe tu pregunta..."
                            />
                            <button class="btn btn-primary mt-2" id="send-btn">Enviar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Script para enviar preguntas y mostrar respuestas
    document.getElementById("send-btn").addEventListener("click", function () {
        const question = document.getElementById("question").value;
        if (!question) {
            alert("Por favor escribe una pregunta.");
            return;
        }

        // Mostrar pregunta en el cuadro de chat
        const chatBox = document.getElementById("chat-box");
        chatBox.innerHTML += `<div><strong>Tú:</strong> ${question}</div>`;
        chatBox.scrollTop = chatBox.scrollHeight;

        // Enviar la pregunta al backend
        fetch("{% url 'ask_ai' %}", {
            method: "POST",
            headers: {
                "X-CSRFToken": "{{ csrf_token }}",
                "Content-Type": "application/x-www-form-urlencoded",
            },
            body: new URLSearchParams({ question: question }),
        })
            .then((response) => response.json())
            .then((data) => {
                // Mostrar respuesta de la IA
                chatBox.innerHTML += `<div><strong>IA:</strong> ${data.answer}</div>`;
                chatBox.scrollTop = chatBox.scrollHeight;
            })
            .catch((error) => console.error("Error:", error));

        // Limpiar el campo de entrada
        document.getElementById("question").value = "";
    });
</script>
=======
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!--divisor codigo-->
>>>>>>> 2a89e5d7a058ff36b143b661ec00d3f6807d3efa
{% endblock content %}
